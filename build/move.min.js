(function(){var a={init:function(c,b){var d=this;this.elementToMove=c;this.handlerElement=b||c;this.x=0;this.y=0;this.movedX=0;this.movedY=0;this.addEvent(this.handlerElement,"mousedown",this.bind(this,this.mouseDown),true);return this},bind:function(c,b){return function(){b.apply(c,arguments)}},getEvent:function(b){return b||window.event},calculatePosition:function(b){if(b.pageY){this.x=b.pageX;this.y=b.pageY}else{this.x=b.clientX;this.y=b.clientY}return this},setPosition:function(d){var c,b;this.movedX=d.pageX||d.clientX;this.movedY=d.pageY||d.clientY;c=this.x-this.movedX;b=this.y-this.movedY;this.calculatePosition(d);this.elementToMove.style.top=this.elementToMove.offsetTop-b+"px";this.elementToMove.style.left=this.elementToMove.offsetLeft-c+"px";return this},addEvent:function(e,d,c,b){b||(b=false);if(e.addEventListener){e.addEventListener(d,c,true)}else{if(e.attachEvent){e.attachEvent("on"+d,c)}}},mouseDown:function(b){b=this.getEvent(b);b.preventDefault();this.mU=this.bind(this,this.mouseUp);this.mM=this.bind(this,this.mouseMove);this.handlerElement.style.cursor="move";this.addEvent(document,"mouseup",this.mU,false);this.addEvent(document,"mousemove",this.mM,false);this.calculatePosition(b);return false},mouseUp:function(b){b=this.getEvent(b);this.removeEvent(document,"mouseup",this.mU,false);this.removeEvent(document,"mousemove",this.mM,false);this.handlerElement.style.cursor="default";return false},mouseMove:function(b){b=this.getEvent(b);this.setPosition(b);return false},removeEvent:function(e,d,c,b){b||(b=false);if(e.removeEventListener){e.removeEventListener(d,c,true)}else{if(e.attachEvent){e.attachEvent("on"+d,c)}}},};a.setMovableElement=function(c,b){return Object.create(a).init(c,b)};window.MovableElement=a})();